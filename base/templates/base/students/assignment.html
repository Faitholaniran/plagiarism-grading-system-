{% extends 'base/dashboard.html' %}
{% block title %}
  Assignments
{% endblock %}
{% block content %}
  <div class="col-lg-12 grid-margin stretch-card">
    <div class="card">
      <div class="card-body">
        <h4 class="card-title d-flex justify-content-between align-items-center"><span>Assignments for {{ course.name }}</span></h4>
        {% if assignments|length == 0 %}
          <h4 class="text-center">There are no assignments for {{ course.name }}</h4>
        {% else %}
          <table class="table table-hover">
            <thead>
              <tr>
                <th>Assignment Name</th>
                <th>Assignment Description</th>
                <th>Due date</th>
                <th>Status</th>
                <th>Submission</th>
                <th>Report</th>
              </tr>
            </thead>
            <tbody>
              {% for assignment in assignments %}
                <tr>
                  <td>
                    {% if assignment.is_due %}
                      <a class="disabled" aria-disabled="true" style="pointer-events: none; color: gray;" href="{% url 'student/submission' course.id assignment.id %}">{{ assignment.name }}</a>
                    {% else %}
                      <a href="{% url 'student/submission' course.id assignment.id %}">{{ assignment.name }}</a>
                    {% endif %}
                  </td>
                  <td>{{ assignment.description|truncatechars:20 }}</td>

                  <td>{{ assignment.due_date|date:'D d M Y' }} {{ assignment.due_date|time:'H:i' }}</td>
                  <td>
                    {% if assignment.is_due %}
                      <label class="badge badge-danger">Due</label>
                    {% else %}
                      <label class="badge badge-success">Not Due</label>
                    {% endif %}
                  </td>
                  <td>
                    {% if assignment in submitted_assignments %}
                      <label class="badge badge-success">Submitted</label>
                    {% else %}
                      <label class="badge badge-danger">Not Submitted</label>
                    {% endif %}
                  </td>
                  <td>
                    {% if assignment.is_due and assignment in submitted_assignments %}
                      <a href="{% url 'student/report' assignment.id %}">View</a>
                    {% else %}
                      <a href="" class="disabled" style="pointer-events: none; color: gray" disabled>View</a>
                    {% endif %}
                  </td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        {% endif %}
      </div>
    </div>
  </div>
{% endblock %}
